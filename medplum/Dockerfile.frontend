FROM node:22-alpine AS build

RUN apk add --no-cache git curl

WORKDIR /app

COPY . .

RUN npm ci

RUN npm run build:fast

WORKDIR /app/packages/app

EXPOSE 3000

CMD ["npx", "vite", "preview", "--port", "3000", "--host"]